# 运算符重载

## 内容

### 什么是运算符重载

+ **[重载](https://baike.baidu.com/item/%E9%87%8D%E8%BD%BD/2282654?fr=aladdin)（overloading）**的概念
  + 函数重载
  + 重载是*一种静态多态*。
+ `>>`本来是位移操作符，与Stream结合后，被重载后流操作符。 *这部分定义怎么实现的？*
+ 用`+`实现复数对象相加运算。

### 运算符重载的方法

+ **运算符重载**本质是函数的重载。
+ `Complex operator+(Complex &c2)`//声明
  + 可以理解`operator+`当作特殊的函数名就OK。

### 重载运算符的规则

+ **只能对已有的C++运算符进行重载**
+ **`. * :: sizeof ?:`不能重载**
+ 通用规则
  + 重载不能改变操作数的个数，不能改变运算符的优先级，不能改变运算符的结合性
  + 重载运算符的函数不能有默认的参数
  + 重载的运算符必须和用户定义的自定义类型的对象一起使用，其参数至少应有一个是类对象（或类对象的引用）。
  + 用于类对象的运算符一般必须重载，但有两个例外“=”和“&”不必用户重载。
    + 赋值运算符=，系统已为每一个新声明的类重载了一个赋值运算符
    + 地址运算符&，它能返回类对象在内存中的起始地址。

### 运算符重载函数作为类成员函数和友元函数

+ **一般将单目运算符重载为成员函数，将双目运算符重载为友元函数**
+ *但作为非成员函数时怎么用呢？*

### 类型转换函数

+ 将一个类的对象转换成另一类型的数据。
+ `operator 类型名() {实现转换的语句}`

### 具体应用

+ 重载双目运算符
+ 重载单目运算符
+ 重载流插入运算符和流提取运算符
+ 构造函数的重载
  + 默认构造函数`Complex()`
  + 用于初始化的构造函数`Complex(double r,double i)`
  + 用于复制对象的**复制构造函数**`Complex(Complex &c)`
  + **转换构造函数**
    + 将一个其它类型的数据转换成一个类的对象
    + 只有一个形参
    + `Complex(double r){real = r;imag =0;}`

## 参考

+ 谭浩强《C++程序设计》chap10运算符重载
+ 《C++面向对象高效编程》（第2版）chap8操作符重载的概念