+ 35W（8月27日-9月2日)

## 本周工作

### 周一（8.27）

+ 当日目标

  + ~~1、上周发现的的bug修复掉。~~*无Parent时，Entity无法添加，当然也无法添加到DE*

  + 2、请教两个问题，我只是能定位，但不太搞得定

    + ~~（1）、最开始`deListGet()`是更新后的值，但是如果执行add操作时也调用了这个函数，函数内的`that.deList = r.list;`里的r.list并不是最新的。~~也就是说*add后直接去couchDB里查时，没有最新值。*

    + （2）、添加Entity时，如何取到Entity的Key值，也能定位到chaincode中`EntityAdd()`的返回值是key，但我不知道怎么取到它，用`console.log()`打印几回，也没定位到底是哪个字段？

  + 3、把代码中不相关的文件、注释过的文件、以及不必要的打印日志删除了再重新提交一份到服务器上。

  + ~~4、忘记还有第2个功能点了，先查mysql返回记录个数，然后再去查couchdb，我先完成mysql的相关操作吧。~~

  + 5、16点把目前所完成的功能展示下，有以下4点需要改善：

    + ~~（1）DE表添加到区块链~~。*这个是做过的，是不是需求调整注释掉了，确认一下。*

    + （2）把目前mysql里的countTbl表，存的是链码里的结构体。*把链码的业务用js重新实现一下*

    + （3）只有count<500的时，EntityList才去区块链里查。

    + （4）目前的页面从7个只保留3个，Entity显示DE区块链里的数据。

+ 当日工作

  + 9点15左右，环境就绪后，10点左右完成目标1。10点50前请教到2中（1）的原因。*在执行Fabric的`query()`时之前的代码有被注释掉*。
  + 14点左右开始做目标4，一直到15:19做得都是无用功，只算写了个demo。*又是把本来应该`get()`,直接拷贝成`post()`，一直没有get到这点，效率就太低了，终于回到正道上后，才真正定位到问题。* 15:35到16点完成了任务4。
  + 确认了目标5中（1)。

+ 当日学习

  + **socket.emit()**是啥？ 之前有提到想把http相应的处理机制，换成socket那种的。*可以学习一下里面的原理*
  + 初略的看了一下《JavaScript编程精解》全书，19:30-21:00的样子。

### 周二（8.28）

+ 当日目标

  + 完成昨天没有搞定的~~目标3~~、目标5。

+ 当日工作

  + 9:40前环境准备OK，开始做count相关。*一直以为创建一个表，里面只有count字段，还问了一下*。【原来是有个count表，同时里面有个count字段，这是chaincode里的】

  + 11:00左右到11:30完成“周一的目标3”。

+ 当日tips

  + `create table ()`中必须是`()`不能是`{}`，**本质上还是sql语法不熟啊**。
    + `-- comment`是sql里的单行注释语法；`/*comment*/`是多行注释。 Key是mysql的关键字。

    + [mysql中int、bigint、smallint 和 tinyint的区别详细介绍](https://www.cnblogs.com/yiwd/p/5531167.html)

    + `alter table Tblcount modify column Month varchar(255) default null  comment 'month'`，[ mysql修改表的字段非空为可以为空](https://blog.csdn.net/u011935772/article/details/80342029)
  + Node.js中字符串拼接：`+`和`join()`还都是知道的，ES6中字符串模板的方式`${day}${month}`， [node.js 怎么拼接字符串](https://zhidao.baidu.com/question/203207448632674645.html)
  + 把自己的non-git上的代码合并到了服务器后，`node index.js`后报错 **“cannot find module socket.io”**，按原来的方式执行`npm install`想全局安装所有依赖的，但没有成功，只需要缺什么安装什么，执行`npm install socket.io`即可。

### 周三（8.29）

+ 当日目标
+ 当日工作
+ 当日心得
  + **好好得把日志信息看懂后再查，而不是贸然的直接复制日志内容，然后查。** --*这对新问题或无头绪的问题，特别重要*

### 周四（8.30）

+ 当日目标

+ 当日工作

+ 当日学习

  + 把《Go in Action》chap02的代码手敲了一遍，但没有运行成功，报“data/data.json”相关问题。

### 周王（8.31）

+ 当日目标

  + ~~从Gitee里下载fabric-dynamic-org的代码，并本地配置运行~~。

  + 结合IPFS跟环境上的工程，实现一下文件的提交和显示。

  + ~~学习《Go in Action》里的代码，并把chap02的代码Run起来~~。

+ 当日工作

  + 9:30到公司，10:40解决好日志报错，**还是要好好看日志**，说没找到文件，一定是没有，我忘记了中间少了一个app目录，所以没找到，日志不报错后，但没有返回值，所以琢磨着是不是：在我的区块链环境里，没有部署这两个链码。**链码配置好后，还是ca的启动位置有问题，导致启动的是7054，而不是8054**。

  + IPFS的API调用，只是知道了下流程，没有集成到项目中呢。

  + chap02的代码Run起来了，家里环境是OK的，琢磨了一下“"The system cannot find the path specified."”的问题在于应该是整个工程要放在`$GOROOT`或`GOPATH`下才行，试了一下果然OK了，不报"data/data.json"的问题了。
